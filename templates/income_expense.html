{% extends 'base.html' %}

{% block title %}Income & Expense Tracker{% endblock %}

{% block content %}
<!-- Floating Baht Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<style>
    .floating-baht {
        position: fixed;
        z-index: 0;
        color: #bfa76f;
        opacity: 0.10;
        font-size: 5rem;
        animation: float 12s infinite linear;
        pointer-events: none;
    }
    .floating-baht.b1 { left: 10vw; top: 12vh; font-size: 7rem; animation-delay: 0s; }
    .floating-baht.b2 { left: 70vw; top: 18vh; font-size: 4.5rem; animation-delay: 2s; }
    .floating-baht.b3 { left: 30vw; top: 70vh; font-size: 6rem; animation-delay: 4s; }
    .floating-baht.b4 { left: 80vw; top: 60vh; font-size: 5.5rem; animation-delay: 6s; }
    .floating-baht.b5 { left: 50vw; top: 40vh; font-size: 8rem; animation-delay: 8s; }
    @keyframes float {
        0% { transform: translateY(0) rotate(0deg); }
        100% { transform: translateY(-40px) rotate(360deg); }
    }
</style>
<i class="fa-solid fa-b floating-baht b1"></i>
<i class="fa-solid fa-b floating-baht b2"></i>
<i class="fa-solid fa-b floating-baht b3"></i>
<i class="fa-solid fa-b floating-baht b4"></i>
<i class="fa-solid fa-b floating-baht b5"></i>

<div class="container" style="max-width: 520px; margin: 3rem auto; padding: 2rem; background: rgba(24,24,31,0.98); border-radius: 18px; box-shadow: 0 0 12px rgba(0,0,0,0.18); color: #f5f5f7; position: relative; z-index: 1;">
    <h1 style="text-align: center; color: #bfa76f; font-size: 2.2rem; margin-bottom: 32px; letter-spacing: 2px; font-weight: 800; text-shadow: 0 2px 8px #000a;">
        Income & Expense Tracker
    </h1>
    <form method="post" style="display: flex; gap: 12px; margin-bottom: 28px; flex-wrap: wrap; justify-content: center;">
        {% csrf_token %}
        <input type="text" name="title" placeholder="Title" required style="padding: 10px 14px; border: 1px solid #23232b; background: #23232b; color: #f5f5f7; border-radius: 8px; font-size: 1rem; font-weight: 600;">
        <input type="number" step="0.01" name="amount" placeholder="Amount" required style="padding: 10px 14px; border: 1px solid #23232b; background: #23232b; color: #f5f5f7; border-radius: 8px; font-size: 1rem; font-weight: 600;">
        <select name="transaction_type" required style="padding: 10px 14px; border: 1px solid #23232b; background: #23232b; color: #f5f5f7; border-radius: 8px; font-size: 1rem; font-weight: 600;">
            <option value="income">Income</option>
			<option value="expense">Expense</option>
		</select>
		<button type="submit" style="background: #bfa76f; color: #23232b; border: none; border-radius: 8px; padding: 10px 22px; font-size: 1rem; font-weight: 700; cursor: pointer; box-shadow: 0 2px 8px rgba(191,167,111,0.18); transition: background 0.2s;">
			Add
		</button>
	</form>
	<div class="totals" style="display: flex; justify-content: space-between; background: #2d2418; border-radius: 10px; padding: 16px 20px; margin-bottom: 24px; font-size: 1.1rem; font-weight: 600;">
		<div><strong>Total Income:</strong> <span style="color: #bfa76f; font-weight: 700;">฿{{ total_income }}</span></div>
		<div><strong>Total Expense:</strong> <span style="color: #a65c2e; font-weight: 700;">฿{{ total_expense }}</span></div>
	</div>
	<table style="width: 100%; border-collapse: collapse; background: #232018; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 12px rgba(80,60,30,0.18);">
	<thead>
		<tr>
		<th style="background: #3a2e1a; color: #bfa76f; font-size: 1.08rem; border-bottom: 2px solid #bfa76f33; font-weight: 700;">Date</th>
		<th style="background: #3a2e1a; color: #bfa76f; font-size: 1.08rem; border-bottom: 2px solid #bfa76f33; font-weight: 700;">Title</th>
		<th style="background: #3a2e1a; color: #bfa76f; font-size: 1.08rem; border-bottom: 2px solid #bfa76f33; font-weight: 700;">Type</th>
		<th style="background: #3a2e1a; color: #bfa76f; font-size: 1.08rem; border-bottom: 2px solid #bfa76f33; font-weight: 700;">Amount</th>
		</tr>
	</thead>
        <tbody>
            {% for record in records %}
            <tr>
                <td>{{ record.date }}</td>
                <td>{{ record.title }}</td>
                <td style="color: {% if record.transaction_type == 'income' %}#1db954{% else %}#e74c3c{% endif %}; font-weight: 700;">
                    {{ record.get_transaction_type_display }}
                </td>
                <td style="color: {% if record.transaction_type == 'income' %}#1db954{% else %}#e74c3c{% endif %}; font-weight: 700;">
                    ฿{{ record.amount }}
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="4" style="text-align:center; color:#aaa;">No records yet.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}